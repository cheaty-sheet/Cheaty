<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="generator" content="cheatsheet">
    <title>NGINX</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css" type="text/css"/>
    <style>
        @page {
            size: A4
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style>
            body {
    width: 210mm;
    height: 297mm;
    font-family: "Fira Sans", sans-serif;
    justify-content: space-evenly;
}

.sheet.padding-5mm {
    padding: 5mm;
}

.head {
    margin-bottom: 2mm;
}

.content {
    width: 100%;
    height: 90%;
    flex-flow: row wrap;
    display: flex;
    font-size: 7px;
    align-items: stretch;
}

.item {
    background: whitesmoke;
    padding: 2mm 2mm 1mm 2mm;
    border-radius: 1mm;
    margin: 2mm;
    box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12),
    0 2px 4px -1px rgba(0, 0, 0, 0.3);
    flex: 1 1 auto;
}

h1 {
    margin: 0;
    font-size: 1.5em;
}

h2 {
    margin: 0;
    font-size: 1em;
}

.item > h2 {
    margin-bottom: 1mm;
    font-size: 1.5em;
}

code.sourceCode {
    font-family: fira_coderegular, monospace;
}

div.sourceCode {
    padding: 1mm;
    border-radius: 1mm;
}

    </style>
</head>
<body class="A4">
<div class="sheet padding-10mm">
    <div class="header">
        <h1>NGINX</h1>
        <p></p>
    </div>
    <div class="content">
            <div class="item">
                <h2>Port (listen)</h2>
                        <div class="freeText" style="background-color: lightcoral">server {
  # standard HTTP protocol
  listen 80;

  # standard HTTPS protocol
  listen 443 ssl;

  # listen on 80 using IPv6
  listen [::]:80;

  # listen only on IPv6
  listen [::]:80 ipv6only&#x3D;on;
}</div>
            </div>
            <div class="item">
                <h2>Domain name (server_name)</h2>
                        <div class="freeText" style="background-color: lightcoral">server {
  # Listen to yourdomain.com
  server_name yourdomain.com;

  # Listen to multiple domains
  server_name yourdomain.com www.yourdomain.com;

  # Listen to all sub-domains
  server_name *.yourdomain.com;

  # Listen to all top-level domains
  server_name yourdomain.*;

  # Listen to unspecified hostnames (listens to IP address itself)
  server_name &quot;&quot;;
}</div>
            </div>
            <div class="item">
                <h2>Access Logging (access_log)</h2>
                        <div class="freeText" style="background-color: lightcoral">server {
  # Relative or full path to log file
  access_log /path/to/file.log;

  # Turn &#x27;on&#x27; or &#x27;off&#x27;
  access_log on;
}</div>
            </div>
            <div class="item">
                <h2>Miscellaneous (gzip, client_max_body_size)</h2>
                        <div class="freeText" style="background-color: lightcoral">server {
  # Turn gzip compression &#x27;on&#x27; or &#x27;off&#x27;
  gzip on;

  # Limit client body size to 10mb
  client_max_body_size 10M;
}</div>
            </div>
            <div class="item">
                <h2>Static assets</h2>
                        <div class="freeText" style="background-color: lightcoral">server {
  listen 80;
  server_name yourdomain.com;

  location / {
  	root /path/to/website;
  }
}</div>
            </div>
            <div class="item">
                <h2>Static assets with HTML5 History Mode</h2>
                        <div class="freeText" style="background-color: lightcoral">server {
  listen 80;
  server_name yourdomain.com;
  root /path/to/website;

  location / {
  	try_files $uri $uri/ /index.html;
  }
}</div>
            </div>
            <div class="item">
                <h2>Redirects</h2>
                        <div class="freeText" style="background-color: lightcoral">server {
  listen 80;
  server_name www.yourdomain.com;
  return 301 http://yourdomain.com$request_uri;
}</div>
                        <div class="freeText" style="background-color: lightcoral">server {
  listen 80;
  server_name yourdomain.com;

  location /redirect-url {
	    return 301 http://otherdomain.com;
  }
}</div>
            </div>
            <div class="item">
                <h2>Reverse Proxy</h2>
                        <div class="freeText" style="background-color: lightcoral">server {
  listen 80;
  server_name yourdomain.com;

  location / {
      proxy_pass http://0.0.0.0:3000;
      # where 0.0.0.0:3000 is your Node.js Server bound on 0.0.0.0 listing on port 3000
  }
}</div>
            </div>
            <div class="item">
                <h2>SSL</h2>
                        <div class="freeText" style="background-color: lightcoral">server {
  listen 443 ssl;
  server_name yourdomain.com;

  ssl on;

  ssl_certificate /path/to/cert.pem;
  ssl_certificate_key /path/to/privkey.pem;

  ssl_stapling on;
  ssl_stapling_verify on;
  ssl_trusted_certificate /path/to/fullchain.pem;

  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
  ssl_session_timeout 1d;
  ssl_session_cache shared:SSL:50m;
  add_header Strict-Transport-Security max-age&#x3D;15768000;
}
# Permanent redirect for HTTP to HTTPS server {
  listen 80;
  server_name yourdomain.com;
  return 301 https://$host$request_uri;
}</div>
            </div>
            <div class="item">
                <h2>Load Balancing</h2>
                        <div class="freeText" style="background-color: lightcoral">upstream node_js {
  server 0.0.0.0:3000;
  server 0.0.0.0:4000;
  server 123.131.121.122;
}
server {
  listen 80;
  server_name yourdomain.com;

  location / {
      proxy_pass http://node_js;
  }
}</div>
            </div>
    </div>
</div>
</body>
</html>